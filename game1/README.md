# NEURAL ASCENSION

脳の進化をテーマにしたインクリメンタル（クリッカー）ゲーム。霊長類の脳から超越的存在まで、8つのステージを駆け上がれ。

## ローカルサーバー起動

```bash
python3 -m http.server 8000
```

ブラウザで http://localhost:8000 を開く。

## テスト実行

```bash
npm install
npm test
```

## ファイル構成

| ファイル | 役割 |
|---|---|
| `index.html` | メインHTML |
| `style.css` | 全スタイル・テーマ・アニメーション |
| `main.js` | ゲーム制御・UI・セーブ/ロード |
| `gameLogic.js` | 純粋関数モジュール（テスト対象） |
| `gameData.json` | ステージ・アップグレード・設定データ |
| `audio.js` | Web Audio API によるBGM/SFX |

## 主要システム

### 壁（コスト壁）

- **ステージ3（農耕文明）**: 全アップグレードのコストが **3倍** に増加
- **ステージ6（超知性）**: 全アップグレードのコストが **4倍** に増加
- **突破手順**: 壁破壊アップグレード購入 → キーアップグレード解放 → キー購入でコスト正常化＋進化可能に
- キー未購入でも閾値到達で停滞が発動するため、計画的な進行が求められる

### 基礎能力（Primal Traits）

- **シナプスの火花**（クリック）、**本能の目覚め**（自動生産）、**好奇心**（乗数）の3種
- 全ステージで購入可能、購入上限なし
- 時代適合度の影響を受けず、常に100%の効果
- **好奇心の乗数は加算式**: 全体乗数 = 1 + 所持数（1個で2倍、5個で6倍、10個で11倍）
- 好奇心のコスト成長率は 1.8倍/個

### 文明ブースト

- ステージごとに最大3回購入できる一時的な強化
- 効果: クリック +50%、NPS +50%、壁コスト -10（1回あたり、加算）
- コストは線形成長: baseCost × (1 + owned)
- **進化すると消滅する**（次ステージに持ち越し不可）

### 時代適合度

- 旧文明のアップグレードはステージが進むほど効果が減衰する
- 差0: 100% → 差1: 70% → 差2: 45% → 差3: 28% → 差4: 18% → 差5+: 12%
- 基礎能力（Primal）は対象外

### ルート分岐

- ステージ4到達時に **BIO**（クリック2倍）または **CYBER**（自動生産2倍）を選択

### オーバークロック

- 進化直後に **20秒間**、全生産 **3倍** ブースト

### 停滞ペナルティ

- **次ステージの閾値に到達した時点**で発動（キー所持は問わない）
- 10秒の猶予後、60秒かけて効率が100% → 10%まで低下
- 進化すると即座にリセット

### 周回（コンバージェンス）

- 最終ステージ到達後、宇宙収束率を100%まで貯めると周回可能
- 周回で **memoryLevel** が+1され、基礎能力に永続ボーナス（逓減型: +40% × log2(level+1)）
- 周回時は全進行状態がリセットされる

### リセット機能

ヘッダーの ⟲ ボタンから2種類のリセットが可能:

- **この文明の最初から**: 現在ステージ開始時点のチェックポイントに復帰
- **最初からやり直す**: 全データ消去（memoryLevel含む）してページリロード
